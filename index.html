<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#0c479d">
<title>TTS Calendar 2025–26 — Mobile</title>
<style>
:root{
  --dp-blue:#0c479d;         /* DePaul blue */
  --dp-blue-2:#003b73;
  --bg:#f6f7fb;
  --card:#ffffff;
  --ink:#0d1b2a;
  --muted:#5d6b7b;
  --chip:#e9eef8;
  --chip-ink:#183153;
  --border:#dfe3ea;
  --good:#0f8b3d;
  --bad:#c62828;
}
* { box-sizing:border-box; }
html, body { margin:0; padding:0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Inter, Helvetica, Arial, sans-serif; color:var(--ink); background:var(--bg); }
header{
  position:sticky; top:0; z-index:10; backdrop-filter:saturate(140%) blur(6px);
  background:linear-gradient(180deg, rgba(12,71,157,0.95) 0%, rgba(12,71,157,0.90) 55%, rgba(12,71,157,0.80) 100%);
  color:#fff; padding:12px 14px 10px; border-bottom:1px solid rgba(255,255,255,0.12);
}
header .bar{ display:flex; gap:8px; align-items:center; }
h1{ margin:2px 0 10px; font-size:22px; line-height:1.14; font-weight:800; letter-spacing:.2px; }
.search{
  flex:1; display:flex; align-items:center; gap:8px;
  background:#fff; color:var(--ink); border-radius:14px; padding:10px 12px; min-height:44px;
  box-shadow:0 1px 0 rgba(0,0,0,.04) inset;
}
.search input{ border:0; outline:0; width:100%; font-size:16px; background:transparent; }
button, .btn{
  border:1px solid rgba(255,255,255,.3); color:#fff; background:transparent; 
  border-radius:12px; padding:10px 12px; font-weight:600; min-height:44px;
}
.btn-light{ background:#fff; color:var(--dp-blue); border-color:#fff; }
#filtersPanel{
  background:var(--card); border-radius:16px; margin:12px 14px; padding:12px; border:1px solid var(--border);
}
fieldset{ border:0; margin:8px 0 2px; padding:0; }
legend{ font-weight:700; font-size:13px; color:var(--muted); margin-bottom:6px; }
.row{ display:flex; flex-wrap:wrap; gap:8px; }
select, .chips{ width:100%; }
select{
  width:100%; appearance:none; border:1px solid var(--border); background:#fff;
  border-radius:12px; padding:10px 12px; font-size:16px;
}
.chips{ display:flex; gap:8px; flex-wrap:wrap; }
.chip{ background:var(--chip); color:var(--chip-ink); border:1px solid var(--border); padding:7px 10px; border-radius:999px; font-weight:600; }
.chip input{ margin-right:8px; transform:scale(1.1); vertical-align:-2px; }
.container{ padding:12px 10px 60px; max-width:1000px; margin-inline:auto; }
.card{
  background:var(--card); border:1px solid var(--border); border-radius:16px; margin:10px 6px; padding:10px 12px;
  box-shadow:0 1px 0 rgba(0,0,0,.02);
}
.card h3{ margin:.1rem 0 .25rem; font-size:17px; }
.meta{ display:flex; flex-wrap:wrap; gap:6px; color:var(--muted); font-size:13px; }
.kv{ background:#f6f8fc; padding:6px 8px; border-radius:10px; border:1px solid var(--border); }
.badge{ background:#ecf3ff; color:var(--dp-blue); padding:4px 8px; border-radius:999px; border:1px solid var(--border); font-size:12px; }
details{ margin-top:6px; }
summary{ cursor:pointer; color:var(--dp-blue); font-weight:700; }
.empty{ text-align:center; color:var(--muted); padding:40px 10px; }
.stickyTools{
  position:sticky; top:70px; z-index:9; background:transparent; padding:4px 14px;
}
.small{ font-size:13px; opacity:.95; }
footer{ color:var(--muted); text-align:center; padding:30px 12px 60px; }
@media (min-width:700px){
  header .bar{ gap:10px; }
  h1{ font-size:24px; }
  .container{ padding-inline:14px; }
}
</style>
</head>
<body>
<header>
  <div class="bar">
    <h1 style="flex:0 0 auto; margin-right:6px;">TTS Calendar 2025–26</h1>
    <div class="search">
      <input id="q" type="search" placeholder="Search names, titles, rooms… (quotes = exact)" inputmode="search" />
    </div>
    <button id="toggleFilters" aria-expanded="false">Filters ▾</button>
  </div>
</header>

<div id="filtersPanel" hidden>
  <fieldset>
    <legend>Cohorts</legend>
    <div class="chips">
      <label class="chip"><input type="checkbox" data-cohort value="BFA1" checked>BFA1</label>
      <label class="chip"><input type="checkbox" data-cohort value="BFA2" checked>BFA2</label>
      <label class="chip"><input type="checkbox" data-cohort value="BFA3" checked>BFA3</label>
      <label class="chip"><input type="checkbox" data-cohort value="BFA4" checked>BFA4</label>
      <label class="chip"><input type="checkbox" data-cohort value="MFA1" checked>MFA1</label>
      <label class="chip"><input type="checkbox" data-cohort value="MFA2" checked>MFA2</label>
    </div>
  </fieldset>
  <div class="row">
    <fieldset style="flex:1 1 220px;">
      <legend>Category</legend>
      <select id="category">
        <option value="All" selected>All</option>
        <option>Class</option>
        <option>Production</option>
        <option>Rehearsal</option>
        <option>Showcase</option>
        <option>Meeting</option>
      </select>
    </fieldset>
    <fieldset style="flex:1 1 220px;">
      <legend>Instructor</legend>
      <select id="instructor">
        <option value="All" selected>All</option>
        <option>Adler, Rob</option>
        <option>Anthony, Chris</option>
        <option>Bullard, Dexter</option>
        <option>Fluty, Kristina</option>
        <option>Gardner, Charles</option>
        <option>Grant, Sammi</option>
        <option>Griffin, Phyllis</option>
        <option>Kitley, Ryan</option>
        <option>Lopez-Rios, Michelle</option>
        <option>Mills, Jeff</option>
        <option>Pullin, Nicolas</option>
      </select>
    </fieldset>
  </div>
  <div class="row">
    <button id="reset" class="btn-light small" style="color:var(--dp-blue);">Reset filters</button>
  </div>
</div>

<div class="stickyTools small" id="resultInfo"></div>

<div class="container" id="list"></div>

<footer class="small">Mobile-first. Strict instructor filtering. Students hidden under “Details”.</footer>

<script>
/*** ---------- DATA (replace/extend) ---------- ***/
const EVENTS = [
  {
    date: "2025-09-14",
    endDate: "2025-09-14",
    time: "6:00–10:00 PM",
    title: "P1 Naked Mole Rat Gets Dressed — First Rehearsal",
    category: "Rehearsal",
    room: "Reskin 301",
    cohorts: ["BFA1"],
    instructors: [],
    students: [],
    notes: "Mainstage rehearsal window. Production code P1."
  },
  {
    date: "2025-09-14",
    endDate: "2025-09-14",
    time: "6:00–10:00 PM",
    title: "SP1 Julius Caesar — First Rehearsal",
    category: "Rehearsal",
    room: "Watts 321",
    cohorts: ["BFA2","BFA3"],
    instructors: [],
    students: [],
    notes: "Studio Production 1."
  },
  {
    date: "2025-09-18",
    endDate: "2025-09-18",
    time: "6:00–10:00 PM",
    title: "SP1 Julius Caesar — Tech",
    category: "Production",
    room: "Healy 442",
    cohorts: ["BFA2","BFA3"],
    instructors: [],
    students: []
  },
  {
    date: "2025-09-26",
    endDate: "2025-09-26",
    time: "7:30 PM",
    title: "SP1 Julius Caesar — Open",
    category: "Production",
    room: "Watts",
    cohorts: ["BFA2","BFA3"],
    instructors: [],
    students: []
  },
  /* Sample classes pulled from screenshots */
  {
    date: "2025-09-22", endDate: "2025-12-01",
    time: "10:40 AM–12:10 PM (Mon/Wed)",
    title: "PRF 551 MFA Improvisation I (410)",
    category: "Class",
    room: "410",
    cohorts: ["MFA1"],
    instructors: ["Adler, Rob"],
    students: []
  },
  {
    date: "2025-09-22", endDate: "2025-12-01",
    time: "12:30–2:20 PM (Mon/Wed)",
    title: "PRF 111 Acting I (405)",
    category: "Class",
    room: "405",
    cohorts: ["BFA1"],
    instructors: ["Adler, Rob"],
    students: []
  },
  {
    date: "2025-09-22", endDate: "2025-12-01",
    time: "1:30–3:00 PM (Mon/Wed) & 3:10–4:40 PM (Mon/Wed/Fri)",
    title: "PRF 331 Voice & Speech III (411)",
    category: "Class",
    room: "411",
    cohorts: ["BFA3"],
    instructors: ["Mills, Jeff"],
    students: []
  },
  {
    date: "2025-09-23", endDate: "2025-12-02",
    time: "9:00–10:30 AM (Tue/Thu) & 10:40–12:10 PM (Tue/Thu)",
    title: "PRF 221 Movement II (411)",
    category: "Class",
    room: "411",
    cohorts: ["BFA2"],
    instructors: ["Fluty, Kristina"],
    students: []
  },
  {
    date: "2025-09-23", endDate: "2025-12-02",
    time: "10:40 AM–12:10 PM (Tue/Thu) & 12:30–2:00 PM (Tue/Thu)",
    title: "PRF 231 Voice & Speech II (303)",
    category: "Class",
    room: "303",
    cohorts: ["BFA2"],
    instructors: ["Grant, Sammi"],
    students: []
  },
  {
    date: "2025-09-24", endDate: "2025-12-04",
    time: "9:30 AM–12:30 PM (Wed) & 10:10–1:10 PM (Fri)",
    title: "PRF 319 Technique (305/405)",
    category: "Class",
    room: "305/405",
    cohorts: ["BFA3"],
    instructors: ["Bullard, Dexter"],
    students: []
  },
  {
    date: "2025-09-22", endDate: "2025-12-01",
    time: "11:20 AM–12:50 PM (Tue/Thu)",
    title: "ACT 290 Acting & Performance (323)",
    category: "Class",
    room: "323",
    cohorts: ["BFA2"],
    instructors: ["Kitley, Ryan"],
    students: []
  }
];
/*** ---------- END DATA ---------- ***/

const el = sel => document.querySelector(sel);
const list = el("#list");
const q = el("#q");
const category = el("#category");
const instructor = el("#instructor");
const filtersPanel = el("#filtersPanel");
const toggleFilters = el("#toggleFilters");
const resultInfo = el("#resultInfo");

toggleFilters.addEventListener("click", () => {
  const isHidden = filtersPanel.hasAttribute("hidden");
  if (isHidden) filtersPanel.removeAttribute("hidden");
  else filtersPanel.setAttribute("hidden","");
  toggleFilters.setAttribute("aria-expanded", String(isHidden));
});

el("#reset").addEventListener("click", () => {
  q.value = "";
  category.value = "All";
  instructor.value = "All";
  document.querySelectorAll("[data-cohort]").forEach(c => c.checked = true);
  render();
});

q.addEventListener("input", render);
category.addEventListener("change", render);
instructor.addEventListener("change", render);
document.querySelectorAll("[data-cohort]").forEach(cb => cb.addEventListener("change", render));

const fmtDate = (iso) => {
  const d = new Date(iso + "T12:00:00");
  return d.toLocaleDateString(undefined, { weekday:"short", month:"short", day:"numeric", year:"numeric" });
};

function matchQuery(item, query){
  if (!query) return true;
  // quoted phrase = exact (case-insensitive)
  const exact = query.match(/^"(.*)"$/);
  const hay = (item.title+"|"+item.room+"|"+(item.notes||"")+"|"+(item.instructors||[]).join(" ")+"|"+(item.students||[]).join(" ")).toLowerCase();
  if (exact) return hay.includes(exact[1].toLowerCase());
  return query.toLowerCase().split(/\s+/).every(tok => hay.includes(tok));
}

function render(){
  const activeCohorts = Array.from(document.querySelectorAll("[data-cohort]:checked")).map(c => c.value);
  const query = q.value.trim();
  const cat = category.value;
  const inst = instructor.value;

  const filtered = EVENTS.filter(ev => {
    // cohort
    if (activeCohorts.length && ev.cohorts && ev.cohorts.length){
      if (!ev.cohorts.some(c => activeCohorts.includes(c))) return false;
    }
    // category
    if (cat !== "All" && ev.category !== cat) return false;
    // strict instructor: only match when the selected instructor is explicitly listed
    if (inst !== "All"){
      const list = Array.isArray(ev.instructors) ? ev.instructors : [];
      if (!list.includes(inst)) return false;
    }
    // query
    if (!matchQuery(ev, query)) return false;
    return true;
  }).sort((a,b)=> (a.date+b.time).localeCompare(b.date+b.time));

  list.innerHTML = "";
  if (!filtered.length){
    list.innerHTML = `<div class="card empty">No matching events.</div>`;
  } else {
    for (const ev of filtered){
      const when = (ev.date===ev.endDate || !ev.endDate) ? fmtDate(ev.date) : `${fmtDate(ev.date)} → ${fmtDate(ev.endDate)}`;
      const who = (ev.instructors && ev.instructors.length) ? `<span class="badge">${ev.instructors.join(", ")}</span>` : "";
      const cohorts = (ev.cohorts && ev.cohorts.length) ? `<span class="badge">${ev.cohorts.join(" · ")}</span>` : "";
      list.insertAdjacentHTML("beforeend", `
        <article class="card">
          <div class="meta" style="margin-bottom:6px;">
            <span class="kv">${when}</span>
            <span class="kv">${ev.time||""}</span>
            <span class="kv">${ev.room||""}</span>
            <span class="badge">${ev.category}</span>
            ${cohorts}
            ${who}
          </div>
          <h3>${ev.title}</h3>
          ${ev.notes ? `<div class="small" style="color:var(--muted); margin-top:4px;">${ev.notes}</div>`:""}
          ${(ev.students && ev.students.length) ? `
            <details>
              <summary>Details (students)</summary>
              <div class="small" style="margin-top:6px;">${ev.students.join(", ")}</div>
            </details>` : ``}
        </article>
      `);
    }
  }
  resultInfo.textContent = `Showing ${filtered.length} of ${EVENTS.length} event(s)`;
}

// initial
render();
</script>
</body>
</html>
